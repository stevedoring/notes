- [shell环境配置](#shell环境配置)
- [执行方式](#执行方式)
- [变量](#变量)
- [字符串操作](#字符串操作)
- [外部参数的传递](#外部参数的传递)
- [数组](#数组)
- [运算符](#运算符)
---
## shell环境配置
- 在linux下，脚本的第一行写上`#!/bin/sh`或者`#!/bin/bash`，是告诉系统所使用的解释器路径
---
## 执行方式
- 有两种执行方式
    - 作为脚本执行
    > 需要在第一行指定解释器  
    > 使用`./file.sh`执行
    - 作为解释器参数执行
    > 不需要指定解释器  
    > 使用`sh file.sh`执行
---
## 变量
- 变量命名只能用字母、数字、下划线
- 赋值时，等号两边不能有空格
- 使用变量时需要加`$`以及使用`{}`将变量括起来
- 使用`readonly`可以将变量设置为只读变量
```shell
variable=1
readonly variable
```
- 使用`unset`可以删除变量，但不能删除只读变量
```shell
variable=1
unset variable #此处删除了变量，后面不可使用该变量
```
---
## 字符串操作
- 单引号和双引号
    - 单引号中字符会原样输出，不能出现变量，不能出现单引号，不能出现转义字符
    - 双引号中可以有变量，可以有转义字符
- 在变量前加`#`即可表示该变量赋值的字符串长度
```shell
variable="1234"
echo ${#variable} #此处会输出4
```
- 使用`expr index "$variable" string`即可在variable中找出string的位置，此处的为反引号，不是单引号
```shell
variable="ab cdefg"
echo `expr index "${variable}" cd` #这里会输出4，空格也算位数，从1开始，按匹配的首字符算
```
- 截取字符串的操作和Python切片类似
```shell
variable="abcdef"
echo ${variable:1:3} #这里将会输出bcd，索引从0开始
```
---
## 外部参数的传递
- 在执行脚本时，可以在脚本后加执行参数，如`./file.sh parameter1 parameter2`。在shell中，可以在脚本内部使用`$n`(n为数字，从0开始)，将参数读取到脚本内使用。
> 在脚本内部使用`$0`是表示读取脚本名，`$1`表示读取第一个参数...以此类推
- 某些组合会有特殊含义，如下表：  

| 参数名 | 含义                              |
| :----: | :-------------------------------: |
| `$#`   | 传递参数总的个数                  |
| `$*`   | 以一个字符串显示所有参数          |
| `$$`   | 显示脚本当前运行的进程号          |
| `$?`   | 显示最后命令的退出状态，0表示正常 |
---
## 数组
- Bash Shell只支持一维数组，初始化时不需要定义数组大小
- 定义一个数组用括号表示，括号内的元素需要使用空格分开，格式为`array=(value1 value2 value3...)`,另外也可以使用下标定义数组：  
`array[0]=value1`  
`array[1]=value2`  
...
- 读取和使用数组和变量类似，只用操作下标即可：`${array[index]}`
- 获得数组中所有元素，在数组的`index`处使用`@`或者`*`即可获得数组所有元素，即`${array[@]}`或`${array[*]}`
- 获取数组元素的个数和变量类似，在数组名前使用`#`，即`${#array[@]}`
---
## 运算符
- 进行运算时常用`expr`工具，使用格式为："`expr value1 + value2`",此处的``是反引号，不是单引号，表达式和运算符之间要有空格。常见运算及实例见下表:  
 
| 运算符 | 含义                       | 示例            |
| :----: | :------------------------: | :-------------: |
| +      | 加                         | `expr $a + $b`  |
| -      | 减                         | `expr $a - $b`  |
| *      | 乘                         | `expr $a \* $b` |
| /      | 除                         | `expr $a / $b`  |
| %      | 取余                       | `expr $a % $b`  |
| =      | 赋值                       | a=$b            |
| ==     | 相等,两数相等则返回true    | [ $a == $b ]    |
| !=     | 不相等，两数不等则返回true | [ $a != $b ]    |
|        |


